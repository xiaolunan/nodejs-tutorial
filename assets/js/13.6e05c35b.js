(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{321:function(t,s,a){t.exports=a.p+"assets/img/bg2019020901.60b2d05e.jpg"},347:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"第5章-包与npm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第5章-包与npm","aria-hidden":"true"}},[t._v("#")]),t._v(" 第5章 包与npm")]),t._v(" "),n("p",[n("strong",[t._v("学习目标")])]),t._v(" "),n("ul",[n("li",[t._v("掌握 npm 的常用命令")]),t._v(" "),n("li",[t._v("理解安装本地包和全局包的区别")]),t._v(" "),n("li",[t._v("理解 package.json 文件作用")])]),t._v(" "),n("h2",{attrs:{id:"npm"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npm","aria-hidden":"true"}},[t._v("#")]),t._v(" npm")]),t._v(" "),n("blockquote",[n("p",[t._v("参考链接：")]),t._v(" "),n("ul",[n("li",[t._v("https://docs.npmjs.com/getting-started/")])])]),t._v(" "),n("p",[t._v("npm 全称 "),n("code",[t._v("Node Package Manager")]),t._v("，它的诞生是为了解决 Node 中第三方包共享的问题。\n和浏览器一样，由于都是 JavaScript，所以前端开发也使用 npm 作为第三方包管理工具。\n例如大名鼎鼎的 jQuery、Bootstrap 等都可以通过 npm 来安装。\n所以官方把 npm 定义为 "),n("code",[t._v("JavaScript Package Manager")]),t._v("。")]),t._v(" "),n("p",[n("code",[t._v("npm")]),t._v(" 有两层含义。一层含义是Node的开放式模块登记和管理系统，网址为"),n("a",{attrs:{href:"http://npmjs.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("npmjs.org"),n("OutboundLink")],1),t._v("。另一层含义是Node默认的模块管理器，是一个命令行下的软件，用来安装和管理Node模块。")]),t._v(" "),n("p",[n("code",[t._v("npm")]),t._v("不需要单独安装。在安装Node的时候，会连带一起安装"),n("code",[t._v("npm")]),t._v("。")]),t._v(" "),n("p",[t._v("执行下面的命令可以用来查看本地安装的 npm 的版本号。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" --version\n")])])]),n("p",[t._v("如果想升级 npm ，可以这样")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" --global\n")])])]),n("h2",{attrs:{id:"常用命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#常用命令","aria-hidden":"true"}},[t._v("#")]),t._v(" 常用命令")]),t._v(" "),n("blockquote",[n("p",[t._v("表格")])]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 在项目中初始化一个 package.json 文件")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 凡是使用 npm 来管理的项目都会有这么一个文件")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 跳过向导，快速生成 package.json 文件")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 简写是 -y")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" init --yes\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 一次性安装 dependencies 中所有的依赖项")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 简写是 npm i")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 安装指定的包，可以简写为 npm i 包名")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# npm 5 以前只下载，不会保存依赖信息，如果需要保存，则需要加上 `--save` 选项")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# npm 5 以后就可以省略 --save 选项了")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 一次性安装多个指定包")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名 包名 包名 "),n("span",{attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 安装指定版本的包")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" 包名@版本号\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# npm list命令以树型结构列出当前项目安装的所有模块，以及它们依赖的模块。")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" list\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 加上global参数，会列出全局安装的模块")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" list -global\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# npm list命令也可以列出单个模块")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" list 包名\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 安装全局包")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" --global 包名\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 更新本地安装的模块")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 它会先到远程仓库查询最新版本，然后查询本地版本。如果本地版本不存在，或者远程版本较新，就会安装")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" update "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("package name"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 升级全局安装的模块")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" update -global "),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("package name"),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 卸载指定的包")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" uninstall 包名\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 查看包信息")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# view 别名：v、info、show")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" view 包名\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 查看使用帮助")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("help")]),t._v("\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 查看某个命令的使用帮助")]),t._v("\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 例如我忘记了 uninstall 命令的简写了，这个时候，可以输入 `npm uninstall --help` 来查看使用帮助")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" 命令 --help\n")])])]),n("h2",{attrs:{id:"全局命令行工具"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#全局命令行工具","aria-hidden":"true"}},[t._v("#")]),t._v(" 全局命令行工具")]),t._v(" "),n("p",[t._v("每个模块可以“全局安装”，也可以“本地安装”。“全局安装”指的是将一个模块安装到系统目录中，各个项目都可以调用。一般来说，全局安装只适用于工具模块，比如"),n("code",[t._v("eslint")]),t._v("和"),n("code",[t._v("gulp")]),t._v("。“本地安装”指的是将一个模块下载到当前项目的"),n("code",[t._v("node_modules")]),t._v("子目录，然后只有在项目目录之中，才能调用这个模块。")]),t._v(" "),n("blockquote",[n("p",[t._v("提示：安装全局包必须加 "),n("code",[t._v("--global")]),t._v(" 参数")])]),t._v(" "),n("h3",{attrs:{id:"http-server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#http-server","aria-hidden":"true"}},[t._v("#")]),t._v(" http-server")]),t._v(" "),n("blockquote",[n("p",[t._v("https://github.com/indexzero/http-server#readme")])]),t._v(" "),n("h3",{attrs:{id:"nodemon"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nodemon","aria-hidden":"true"}},[t._v("#")]),t._v(" nodemon")]),t._v(" "),n("blockquote",[n("p",[t._v("http://nodemon.io/")])]),t._v(" "),n("h3",{attrs:{id:"less"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#less","aria-hidden":"true"}},[t._v("#")]),t._v(" less")]),t._v(" "),n("blockquote",[n("p",[t._v("http://lesscss.org/")])]),t._v(" "),n("h3",{attrs:{id:"browser-sync"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#browser-sync","aria-hidden":"true"}},[t._v("#")]),t._v(" browser-sync")]),t._v(" "),n("blockquote",[n("p",[t._v("https://browsersync.io/")])]),t._v(" "),n("h2",{attrs:{id:"切换-npm-镜像源"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#切换-npm-镜像源","aria-hidden":"true"}},[t._v("#")]),t._v(" 切换 npm 镜像源")]),t._v(" "),n("ul",[n("li",[n("code",[t._v("npm install jquery --registry=https://registry.npm.taobao.org")])]),t._v(" "),n("li",[n("code",[t._v("npm config set registry https://registry.npm.taobao.org")])]),t._v(" "),n("li",[n("a",{attrs:{href:"https://github.com/Pana/nrm",target:"_blank",rel:"noopener noreferrer"}},[t._v("nrm"),n("OutboundLink")],1)])]),t._v(" "),n("p",[t._v("npm 存储包文件的服务器在国外，有时候会被墙，速度很慢，所以我们需要解决这个问题。")]),t._v(" "),n("p",[t._v("国内淘宝的开发团队把 npm 在国内做了一个备份，网址是：http://npm.taobao.org/。")]),t._v(" "),n("p",[t._v("最简单的方式就是我们在安装包的时候告诉 npm 你去哪个服务器下载。")]),t._v(" "),n("p",[t._v("例如使用淘宝的 npm 镜像源下载 jquery:")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" jquery --registry"),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v("https://registry.npm.taobao.org\n")])])]),n("p",[t._v("但是每次手动往后面加 "),n("code",[t._v("--registry=https://registry.npm.taobao.org")]),t._v(" 很麻烦，\n所以我们可以通过修改配置文件的方式来处理解决。")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 配置到淘宝服务器")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),n("span",{attrs:{class:"token keyword"}},[t._v("set")]),t._v(" registry https://registry.npm.taobao.org\n\n"),n("span",{attrs:{class:"token comment"}},[t._v("# 查看 registry 是否配置正确")]),t._v("\n"),n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" config get registry\n")])])]),n("p",[t._v("只要经过了上面命令的配置，则你以后所有的 "),n("code",[t._v("npm install")]),t._v(" 都会使用你配置的 "),n("code",[t._v("registry")]),t._v(" 下载。")]),t._v(" "),n("h2",{attrs:{id:"package-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-json","aria-hidden":"true"}},[t._v("#")]),t._v(" package.json")]),t._v(" "),n("p",[t._v("每个项目的根目录下面，一般都有一个"),n("code",[t._v("package.json")]),t._v("文件，定义了这个项目所需要的各种模块，以及项目的配置信息（比如名称、版本、许可证等元数据）。"),n("code",[t._v("npm install")]),t._v("命令根据这个配置文件，自动下载所需的模块，也就是配置项目所需的运行和开发环境。")]),t._v(" "),n("p",[t._v("package.json文件可以手工编写，也可以使用"),n("code",[t._v("npm init")]),t._v("命令自动生成。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" init\n")])])]),n("p",[t._v("这个命令采用互动方式，要求用户回答一些问题，然后在当前目录生成一个基本的package.json文件。所有问题之中，只有项目名称（name）和项目版本（version）是必填的，其他都是选填的。")]),t._v(" "),n("p",[t._v("这个文件可以通过 "),n("code",[t._v("npm init")]),t._v(" 的方式来自动初始化出来。")]),t._v(" "),n("p",[t._v("下面是一个最简单的package.json文件，只定义两项元数据：项目名称和项目版本。")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"name"')]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"xxx"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"version"')]),t._v(" "),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"0.0.0"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("p",[n("code",[t._v("package.json")]),t._v("文件就是一个JSON对象，该对象的每一个成员就是当前项目的一项设置。比如"),n("code",[t._v("name")]),t._v("就是项目名称，"),n("code",[t._v("version")]),t._v("是版本（遵守“大版本.次要版本.小版本”的格式）。")]),t._v(" "),n("p",[t._v("下面是一个更完整的package.json文件。")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"name"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"Hello World"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"version"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"0.0.1"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"author"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"张三"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"description"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"第一个node.js程序"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"keywords"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token string"}},[t._v('"node.js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token string"}},[t._v('"javascript"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"repository"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"type"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"git"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"url"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"https://path/to/url"')]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"license"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token string"}},[t._v('"MIT"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"engines"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token property"}},[t._v('"node"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"0.10.x"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"bugs"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token property"}},[t._v('"url"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token string"}},[t._v('"http://path/to/bug"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token property"}},[t._v('"email"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token string"}},[t._v('"bug@example.com"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"contributors"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{attrs:{class:"token property"}},[t._v('"name"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token string"}},[t._v('"李四"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{attrs:{class:"token property"}},[t._v('"email"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),n("span",{attrs:{class:"token string"}},[t._v('"lisi@example.com"')]),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"start"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"node index.js"')]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"dependencies"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"express"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"latest"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"mongoose"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~3.8.3"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"handlebars-runtime"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~1.0.12"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"express3-handlebars"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~0.5.0"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"MD5"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~1.2.0"')]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token property"}},[t._v('"devDependencies"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"bower"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~1.2.8"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"grunt"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~0.4.1"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"grunt-contrib-concat"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~0.3.0"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"grunt-contrib-jshint"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~0.7.2"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"grunt-contrib-uglify"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~0.2.7"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"grunt-contrib-clean"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~0.5.0"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"browserify"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"2.36.1"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t"),n("span",{attrs:{class:"token property"}},[t._v('"grunt-browserify"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~1.3.0"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("p",[t._v("下面详细解释package.json文件的各个字段。")]),t._v(" "),n("h3",{attrs:{id:"dependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#dependencies","aria-hidden":"true"}},[t._v("#")]),t._v(" dependencies")]),t._v(" "),n("p",[n("code",[t._v("dependencies")]),t._v("字段指定了项目运行所依赖的模块，"),n("code",[t._v("devDependencies")]),t._v("指定项目开发所需要的模块。")]),t._v(" "),n("p",[t._v("它们都指向一个对象。该对象的各个成员，分别由模块名和对应的版本要求组成，表示依赖的模块及其版本范围。")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{attrs:{class:"token property"}},[t._v('"devDependencies"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"browserify"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~13.0.0"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"karma-browserify"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"~5.0.1"')]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("p",[t._v("对应的版本可以加上各种限定，主要有以下几种：")]),t._v(" "),n("ul",[n("li",[n("strong",[t._v("指定版本")]),t._v("：比如"),n("code",[t._v("1.2.2")]),t._v("，遵循“大版本.次要版本.小版本”的格式规定，安装时只安装指定版本。")]),t._v(" "),n("li",[n("strong",[t._v("波浪号（tilde）+指定版本")]),t._v("：比如"),n("code",[t._v("~1.2.2")]),t._v("，表示安装1.2.x的最新版本（不低于1.2.2），但是不安装1.3.x，也就是说安装时不改变大版本号和次要版本号。")]),t._v(" "),n("li",[n("strong",[t._v("插入号（caret）+指定版本")]),t._v("：比如ˆ1.2.2，表示安装1.x.x的最新版本（不低于1.2.2），但是不安装2.x.x，也就是说安装时不改变大版本号。需要注意的是，如果大版本号为0，则插入号的行为与波浪号相同，这是因为此时处于开发阶段，即使是次要版本号变动，也可能带来程序的不兼容。")]),t._v(" "),n("li",[n("strong",[t._v("latest")]),t._v("：安装最新版本。")])]),t._v(" "),n("h3",{attrs:{id:"main"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#main","aria-hidden":"true"}},[t._v("#")]),t._v(" main")]),t._v(" "),n("p",[n("code",[t._v("main")]),t._v("字段指定了加载的入口文件，"),n("code",[t._v("require('moduleName')")]),t._v("就会加载这个文件。这个字段的默认值是模块根目录下面的"),n("code",[t._v("index.js")]),t._v("。")]),t._v(" "),n("h3",{attrs:{id:"scripts"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#scripts","aria-hidden":"true"}},[t._v("#")]),t._v(" scripts")]),t._v(" "),n("p",[n("code",[t._v("scripts")]),t._v("指定了运行脚本命令的npm命令行缩写，比如start指定了运行"),n("code",[t._v("npm run start")]),t._v("时，所要执行的命令。")]),t._v(" "),n("p",[t._v("下面的设置指定了"),n("code",[t._v("npm run preinstall")]),t._v("、"),n("code",[t._v("npm run postinstall")]),t._v("、"),n("code",[t._v("npm run start")]),t._v("、"),n("code",[t._v("npm run test")]),t._v("时，所要执行的命令。")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"preinstall"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"echo here it comes!"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"postinstall"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"echo there it goes!"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"start"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"node index.js"')]),n("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{attrs:{class:"token property"}},[t._v('"test"')]),n("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"tap test/*.js"')]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("blockquote",[n("p",[t._v("扩展阅读："),n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm scripts 使用指南"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"package-lock-json"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#package-lock-json","aria-hidden":"true"}},[t._v("#")]),t._v(" package-lock.json")]),t._v(" "),n("p",[t._v("npm 5 以前是不会有 "),n("code",[t._v("package-lock.json")]),t._v(" 这个文件的。（被开发者诟病，吐槽的问题）。")]),t._v(" "),n("p",[t._v("以前会自作多情的自动给你升级。")]),t._v(" "),n("p",[t._v("npm 5 以后才加入了这个文件。")]),t._v(" "),n("p",[t._v("当你安装包的时候，npm 都会生成或者更新 "),n("code",[t._v("package-lock.json")]),t._v(" 这个文件。")]),t._v(" "),n("ul",[n("li",[t._v("npm 5 以后的版本安装包不需要加 "),n("code",[t._v("--save")]),t._v(" 参数，它会自动保存依赖信息")]),t._v(" "),n("li",[t._v("当你安装包的时候，会自动创建或者是更新 "),n("code",[t._v("package-lock.json")]),t._v(" 这个文件")]),t._v(" "),n("li",[n("code",[t._v("package-lock.json")]),t._v(" 这个文件会保存 "),n("code",[t._v("node_modules")]),t._v(" 中所有包的信息（版本、下载地址）\n"),n("ul",[n("li",[t._v("这样的话重新 "),n("code",[t._v("npm install")]),t._v(" 的时候速度就可以提升")])])]),t._v(" "),n("li",[t._v("从文件来看，有一个 "),n("code",[t._v("lock")]),t._v(" 称之为锁\n"),n("ul",[n("li",[t._v("这个 "),n("code",[t._v("lock")]),t._v(" 是用来锁定版本的")]),t._v(" "),n("li",[t._v("如果项目依赖了 "),n("code",[t._v("1.1.1")]),t._v(" 版本")]),t._v(" "),n("li",[t._v("如果你重新 isntall 其实会下载最新版本，而不是 1.1.1")]),t._v(" "),n("li",[t._v("我们的目的就是希望可以锁住 1.1.1 这个版本")]),t._v(" "),n("li",[t._v("所以这个 "),n("code",[t._v("package-lock.json")]),t._v(" 这个文件的另一个作用就是锁定版本号，防止自动升级新版")])])])]),t._v(" "),n("h2",{attrs:{id:"npx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#npx","aria-hidden":"true"}},[t._v("#")]),t._v(" npx")]),t._v(" "),n("blockquote",[n("p",[t._v("参考链接：")]),t._v(" "),n("ul",[n("li",[t._v("http://www.ruanyifeng.com/blog/2019/02/npx.html")]),t._v(" "),n("li",[t._v("https://github.com/zkat/npx")]),t._v(" "),n("li",[t._v("https://www.jianshu.com/p/cee806439865")])])]),t._v(" "),n("p",[t._v("npm 从5.2版开始，增加了 npx 命令。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(321),alt:"img"}})]),t._v(" "),n("p",[t._v("Node 自带 npm 模块，所以可以直接使用 npx 命令。万一不能用，就要手动安装一下。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -g npx\n")])])]),n("h3",{attrs:{id:"调用项目安装的模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#调用项目安装的模块","aria-hidden":"true"}},[t._v("#")]),t._v(" 调用项目安装的模块")]),t._v(" "),n("p",[t._v("npx 想要解决的主要问题，就是调用项目内部安装的模块。比如，项目内部安装了测试工具 "),n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Mocha"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),n("span",{attrs:{class:"token function"}},[t._v("install")]),t._v(" -D mocha\n")])])]),n("p",[t._v("一般来说，调用 Mocha ，只能在项目脚本和 package.json 的"),n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html",target:"_blank",rel:"noopener noreferrer"}},[n("code",[t._v("scripts")]),n("OutboundLink")],1),t._v("字段里面， 如果想在命令行下调用，必须像下面这样。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 项目的根目录下执行")]),t._v("\n$ node-modules/.bin/mocha --version\n")])])]),n("p",[t._v("npx 就是想解决这个问题，让项目内部安装的模块用起来更方便，只要像下面这样调用就行了。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("npx mocha --version\n")])])]),n("p",[t._v("npx 的原理很简单，就是运行的时候，会到"),n("code",[t._v("node_modules/.bin")]),t._v("路径和环境变量"),n("code",[t._v("$PATH")]),t._v("里面，检查命令是否存在。")]),t._v(" "),n("p",[t._v("由于 npx 会检查环境变量"),n("code",[t._v("$PATH")]),t._v("，所以系统命令也可以调用。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{attrs:{class:"token comment"}},[t._v("# 等同于 ls")]),t._v("\nnpx "),n("span",{attrs:{class:"token function"}},[t._v("ls")]),t._v("\n")])])]),n("p",[t._v("注意，Bash 内置的命令不在"),n("code",[t._v("$PATH")]),t._v("里面，所以不能用。比如，"),n("code",[t._v("cd")]),t._v("是 Bash 命令，因此就不能用"),n("code",[t._v("npx cd")]),t._v("。")]),t._v(" "),n("h3",{attrs:{id:"避免全局安装模块"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#避免全局安装模块","aria-hidden":"true"}},[t._v("#")]),t._v(" 避免全局安装模块")]),t._v(" "),n("p",[t._v("除了调用项目内部模块，npx 还能避免全局安装的模块。比如，"),n("code",[t._v("create-react-app")]),t._v("这个模块是全局安装，npx 可以运行它，而且不进行全局安装。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("npx create-react-app my-react-app\n")])])]),n("p",[t._v("上面代码运行时，npx 将"),n("code",[t._v("create-react-app")]),t._v("下载到一个临时目录，使用以后再删除。所以，以后再次执行上面的命令，会重新下载"),n("code",[t._v("create-react-app")]),t._v("。")]),t._v(" "),n("p",[t._v("下载全局模块时，npx 允许指定版本。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("npx uglify-js@3.1.0 main.js -o ./dist/main.js\n")])])]),n("p",[t._v("上面代码指定使用 3.1.0 版本的"),n("code",[t._v("uglify-js")]),t._v("压缩脚本。")]),t._v(" "),n("p",[t._v("注意，只要 npx 后面的模块无法在本地发现，就会下载同名模块。比如，本地没有安装"),n("code",[t._v("http-server")]),t._v("模块，下面的命令会自动下载该模块，在当前目录启动一个 Web 服务。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("npx http-server\n")])])]),n("h3",{attrs:{id:"no-install-参数和-ignore-existing-参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#no-install-参数和-ignore-existing-参数","aria-hidden":"true"}},[t._v("#")]),t._v(" --no-install 参数和 --ignore-existing 参数")]),t._v(" "),n("p",[t._v("如果想让 npx 强制使用本地模块，不下载远程模块，可以使用"),n("code",[t._v("--no-install")]),t._v("参数。如果本地不存在该模块，就会报错。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("npx --no-install http-server\n")])])]),n("p",[t._v("反过来，如果忽略本地的同名模块，强制安装使用远程模块，可以使用"),n("code",[t._v("--ignore-existing")]),t._v("参数。比如，本地已经全局安装了"),n("code",[t._v("create-react-app")]),t._v("，但还是想使用远程模块，就用这个参数。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("npx --ignore-existing create-react-app my-react-app\n")])])]),n("h3",{attrs:{id:"使用不同版本的-node"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用不同版本的-node","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用不同版本的 node")]),t._v(" "),n("p",[t._v("利用 npx 可以下载模块这个特点，可以指定某个版本的 Node 运行脚本。它的窍门就是使用 npm 的 "),n("a",{attrs:{href:"https://www.npmjs.com/package/node",target:"_blank",rel:"noopener noreferrer"}},[t._v("node 模块"),n("OutboundLink")],1),t._v("。")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("npx node@0.12.8 -v\nv0.12.8\n")])])]),n("p",[t._v("上面命令会使用 0.12.8 版本的 Node 执行脚本。原理是从 npm 下载这个版本的 node，使用后再删掉。")]),t._v(" "),n("p",[t._v("某些场景下，这个方法用来切换 Node 版本，要比 nvm 那样的版本管理器方便一些。")]),t._v(" "),n("h3",{attrs:{id:"相关链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#相关链接","aria-hidden":"true"}},[t._v("#")]),t._v(" 相关链接")]),t._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/02/npx.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.ruanyifeng.com/blog/2019/02/npx.html"),n("OutboundLink")],1)])]),t._v(" "),n("h2",{attrs:{id:"扩展阅读"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#扩展阅读","aria-hidden":"true"}},[t._v("#")]),t._v(" 扩展阅读")]),t._v(" "),n("ul",[n("li",[n("p",[n("a",{attrs:{href:"http://javascript.ruanyifeng.com/nodejs/npm.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 模块管理器"),n("OutboundLink")],1)])]),t._v(" "),n("li",[n("p",[n("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2016/01/npm-install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("npm 模块安装机制"),n("OutboundLink")],1)])])]),t._v(" "),n("h2",{attrs:{id:"小结"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#小结","aria-hidden":"true"}},[t._v("#")]),t._v(" 小结")])])},[],!1,null,null,null);e.options.__file="05-package_npm.md";s.default=e.exports}}]);